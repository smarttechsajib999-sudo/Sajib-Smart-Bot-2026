name: Sajib_Final_Fixed_Bot_v3
on:
  workflow_dispatch:

jobs:
  everything:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v3
      
      # ১. সিস্টেম ফাইল ইনস্টল (Pillow এর জন্য)
      - name: Install System Libraries
        run: |
          sudo apt-get update
          sudo apt-get install -y libjpeg-dev zlib1g-dev libpng-dev imagemagick

      # ২. পাইথন লাইব্রেরি ইনস্টল (এখানেই lxml যোগ করলাম)
      - name: Install Python Libraries & Run
        run: |
          pip install --upgrade pip
          
          # lxml যোগ করা হয়েছে যাতে XML এরর না আসে
          pip install openai edge-tts requests beautifulsoup4 lxml google-api-python-client google-auth-oauthlib
          pip install "Pillow>=9.0.0" 
          pip install moviepy==1.0.3

          # মেইন বোট কোড
          cat << 'EOF' > bot.py
          import os, pickle, requests, asyncio, sys
          from openai import OpenAI
          import edge_tts
          from moviepy.editor import VideoFileClip, AudioFileClip
          from bs4 import BeautifulSoup
          from googleapiclient.discovery import build
          from googleapiclient.http import MediaFileUpload

          client = OpenAI(api_key="0afdca64-4ba2-4556-ae28-e9f227abecb0", base_url="https://api.sambanova.ai/v1")
          P_KEY = "BjHJTux4O3vjypGJOkerA1DQkj9czukgBQyiYj9OH04hE9EKQp6TJEc5"

          async def run():
              try:
                  print("1. Checking Token...")
                  t_file = "token.pickle" if os.path.exists("token.pickle") else "token (1).pickle"
                  if not os.path.exists(t_file):
                      raise Exception("token.pickle file not found!")

                  with open(t_file, 'rb') as t: creds = pickle.load(t)
                  yt = build("youtube", "v3", credentials=creds)

                  print("2. Getting News...")
                  # XML পার্স করার জন্য lxml ব্যবহার করা হচ্ছে
                  r = requests.get("https://news.google.com/rss/search?q=latest+tech+gadgets&hl=bn&gl=BD&ceid=BD:bn")
                  soup = BeautifulSoup(r.content, features="xml") # এখানে lxml দরকার
                  items = soup.findAll('
                  
